(this["webpackJsonpmonday-integration-quickstart-app"]=this["webpackJsonpmonday-integration-quickstart-app"]||[]).push([[0],{144:function(e,n,t){e.exports=t(317)},149:function(e,n,t){},151:function(e,n,t){},192:function(e,n){},194:function(e,n){},208:function(e,n){},210:function(e,n){},238:function(e,n){},240:function(e,n){},241:function(e,n){},247:function(e,n){},249:function(e,n){},267:function(e,n){},269:function(e,n){},281:function(e,n){},284:function(e,n){},317:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(29),u=t.n(o),c=(t(149),t(143)),i=t(4),s=t.n(i),d=t(10),l=t(13),f=(t(151),t(141)),p=t.n(f),m=(t(166),t(142)),b=t(42),v=t.n(b);t(184).config();var h=t(188),B="https://create-group-integration.herokuapp.com";function g(){return(g=Object(d.a)(s.a.mark((function e(n){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getUserBoards -> userId",n),console.log("getUserBoards -> ","".concat(B,"/getUserBoards")),e.next=4,v.a.post("".concat(B,"/getUserBoards"),{userId:n});case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(d.a)(s.a.mark((function e(n,t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat(B,"/add"),{mainBoard:n,subBoards:t,userId:a});case 2:return e.abrupt("return",{mainBoard:n,subBoards:t,userId:a});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,n,t,a){return j.apply(this,arguments)}function j(){return(j=Object(d.a)(s.a.mark((function e(n,t,a,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("update -> mainBoard, subBoards, userId, id",n,t,a,r),e.next=3,v.a.post("".concat(B,"/update"),{mainBoard:n,subBoards:t,userId:a,id:r});case 3:return e.abrupt("return",{mainBoard:n,subBoards:t,userId:a,id:r});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=Object(m.a)({getUserBoards:function(e){return g.apply(this,arguments)},add:function(e,n,t){return O.apply(this,arguments)},update:E,decrypt:function(e){console.log("decrypt -> process.env.CLIENT_SECRET",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).SIGNING_SECRET);var n=h.verify(e,"642b0bb8bc50d1e365e9ba0a07e3dc21");return console.log("decrypt -> decryptedToken",n),n}},"update",E),y=t(21);function k(e){var n=e.relation,t=e.boards,o=e.boardNames,u=e.userId,c=Object(a.useState)({mainBoard:{value:0,label:""},subBoards:[],userId:u,_id:n._id}),i=Object(l.a)(c,2),f=i[0],p=i[1];Object(a.useEffect)((function(){b()}),[]);var m=function(){var e=Object(d.a)(s.a.mark((function e(){var n,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.subBoards.map((function(e){return Number(e.value)})),e.next=3,w.update(Number(f.mainBoard.value),n,u,f._id);case 3:t=e.sent,b(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,a={mainBoard:{value:0,label:""},subBoards:[],_id:n._id,userId:f.userId};a.mainBoard=null===t||void 0===t?void 0:t.filter((function(n){return n.value==e.mainBoard}))[0],a.subBoards=null===e||void 0===e?void 0:e.subBoards.map((function(e){return null===t||void 0===t?void 0:t.filter((function(n){return Number(n.value)===e}))[0]})),p(a)},v=function(e,t){var a={userId:u,mainBoard:f.mainBoard,subBoards:f.subBoards,_id:n._id};"sub"===e?a.subBoards=t:a.mainBoard=t,p(a)};return r.a.createElement("div",{className:"content"},r.a.createElement(y.a,{placeholder:"Choose a main board",value:f.mainBoard,options:o,defaultValue:f.mainBoard,onChange:function(e){return v("main",e)}}),r.a.createElement(y.a,{isMulti:!0,placeholder:"Choose sub boards",value:f.subBoards,options:o,defaultValue:f.subBoards,onChange:function(e){return v("sub",e)}}),r.a.createElement("button",{className:"add-button",onClick:m},"Update"))}function x(){return r.a.createElement("div",null,r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/c/c7/Loading_2.gif",className:"loader"}))}var N=p()();function C(){var e=Object(a.useState)(),n=Object(l.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(),i=Object(l.a)(u,2),f=i[0],p=i[1],m=Object(a.useState)([]),b=Object(l.a)(m,2),v=b[0],h=b[1],B=Object(a.useState)(),g=Object(l.a)(B,2),O=g[0],E=g[1],j=Object(a.useState)([]),C=Object(l.a)(j,2),I=C[0],_=C[1],S=Object(a.useState)(!0),T=Object(l.a)(S,2),U=T[0],W=T[1];Object(a.useEffect)((function(){q()}),[]),Object(a.useEffect)((function(){L()}),[f]),Object(a.useEffect)((function(){O&&t&&D()}),[O,t]);var q=function(){var e=Object(d.a)(s.a.mark((function e(){var n,t,a,r,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("context");case 2:return n=e.sent,E(Number(n.data.user.id)),e.prev=4,"query{\n        boards(limit:2000){\n          id\n          name\n        }\n      }",e.next=8,N.api("query{\n        boards(limit:2000){\n          id\n          name\n        }\n      }");case 8:r=e.sent,u=null===r||void 0===r||null===(t=r.data)||void 0===t||null===(a=t.boards)||void 0===a?void 0:a.map((function(e){return{value:e.id,label:e.name}})),o(u),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log("getContext -> err",e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getUserBoards(O);case 2:n=e.sent,_(null===n||void 0===n?void 0:n.data),W(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===t||void 0===t?void 0:t.find((function(e){return e.name===f}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(s.a.mark((function e(){var n,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.map((function(e){return Number(e.value)})),e.next=3,w.add(Number(f.value),n,O);case 3:t=e.sent,_([].concat(Object(c.a)(I),[t]));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=null===t||void 0===t?void 0:t.filter((function(e){return(null===e||void 0===e?void 0:e.value)!==(null===f||void 0===f?void 0:f.value)}));return r.a.createElement("div",{className:"App"},U?r.a.createElement(x,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"content"},r.a.createElement("h1",null,"Create new relation"),t&&r.a.createElement("div",null,r.a.createElement(y.a,{placeholder:"Choose a main board",value:f,options:A,onChange:function(e){return function(e){p(e)}(e)}}),r.a.createElement(y.a,{isMulti:!0,placeholder:"Choose sub boards",value:v,options:A,onChange:function(e){h(e)}})),r.a.createElement("button",{className:"add-button",onClick:R},"Add boards relation")),r.a.createElement("div",{className:"edit-boards"},r.a.createElement("h1",null," edit existing relations"),I&&(null===I||void 0===I?void 0:I.map((function(e,n){return r.a.createElement(k,{key:n,relation:e,boardNames:A,boards:t,userId:O})}))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[144,1,2]]]);
//# sourceMappingURL=main.fc1aae13.chunk.js.map